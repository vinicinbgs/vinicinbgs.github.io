"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[669],{5350:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});var s=i(4848),l=i(8453);const a={title:"Understand Shell Script",date:new Date("2022-02-21T00:00:00.000Z"),slug:"/understand-shell-script",description:"Ill show to you how works a shell script and we go create one example",tags:["technology","shell script","automation"]},r=void 0,t={permalink:"/blog/understand-shell-script",editUrl:"https://github.com/vinicinbgs/vinicinbgs.github.io/blob/main/blog/understand-shell-script/index.mdx",source:"@site/i18n/pt-br/docusaurus-plugin-content-blog/understand-shell-script/index.mdx",title:"Understand Shell Script",description:"Ill show to you how works a shell script and we go create one example",date:"2022-02-21T00:00:00.000Z",tags:[{inline:!0,label:"technology",permalink:"/blog/tags/technology"},{inline:!0,label:"shell script",permalink:"/blog/tags/shell-script"},{inline:!0,label:"automation",permalink:"/blog/tags/automation"}],readingTime:6.47,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Understand Shell Script",date:"2022-02-21T00:00:00.000Z",slug:"/understand-shell-script",description:"Ill show to you how works a shell script and we go create one example",tags:["technology","shell script","automation"]},unlisted:!1},o={authorsImageUrls:[]},c=[{value:"Summary:",id:"summary",level:4},{value:"Goal:",id:"goal",level:2},{value:"<a></a> 1. Introduction",id:"-1-introduction",level:2},{value:"<a></a> 2. Variables",id:"-2-variables",level:2},{value:"2.1 <a></a> Declare Variable",id:"21--declare-variable",level:3},{value:"2.2 <a></a> Read Input Variable",id:"22--read-input-variable",level:3},{value:"<a></a> 3. Loops",id:"-3-loops",level:2},{value:"<a></a> 3.1 For",id:"-31-for",level:3},{value:"<a></a> 3.2 While",id:"-32-while",level:3},{value:"<a></a> 4. Comparison",id:"-4-comparison",level:3},{value:"<a></a> 4.1 Numbers Comparison",id:"-41-numbers-comparison",level:4},{value:"<a></a> 4.2 String Comparison",id:"-42-string-comparison",level:4},{value:"<a></a> 5. Final example.sh",id:"-5-final-examplesh",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h4,{id:"summary",children:"Summary:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/vinicinbgs/blog-projects/tree/main/shell-script",children:"Repository on GitHub"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#intro",children:"Introduction"})}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["1.1 ",(0,s.jsx)(n.a,{href:"#create-example",children:"Create Example"})]}),"\n",(0,s.jsxs)(n.li,{children:["1.2 ",(0,s.jsx)(n.a,{href:"#write-example",children:"Write Example"})]}),"\n",(0,s.jsxs)(n.li,{children:["1.3 ",(0,s.jsx)(n.a,{href:"#run-example",children:"Run Example"})]}),"\n",(0,s.jsxs)(n.li,{children:["1.4 ",(0,s.jsx)(n.a,{href:"#create-new-file-example",children:"Touch Example"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#loops",children:"Loops"})}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["2.1 ",(0,s.jsx)(n.a,{href:"#loops-for",children:"For"})]}),"\n",(0,s.jsxs)(n.li,{children:["2.2 ",(0,s.jsx)(n.a,{href:"#loops-while",children:"While"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#comparison",children:"Comparison"})}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["3.1 ",(0,s.jsx)(n.a,{href:"#string-comparison",children:"String Comparison"})]}),"\n",(0,s.jsxs)(n.li,{children:["3.2 ",(0,s.jsx)(n.a,{href:"#numbers-comparison",children:"Numbers Comparison"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#final-example",children:"Final Example"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#sources",children:"Sources"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"goal",children:"Goal:"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["My intention is to give to you an idea of how you can create your own shell script commands\nto automate some tasks and show to you some references (",(0,s.jsx)(n.a,{href:"https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html",children:"https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html"}),") (",(0,s.jsx)(n.a,{href:"https://www.shellscript.sh",children:"https://www.shellscript.sh"}),")."]}),"\n",(0,s.jsx)(n.p,{children:"Shell script has Variables, Repetition Structures, Conditional Statements and commands UNIX so you can create\nscripts to use as entrypoint.sh on docker container or just to automate one boring manual task in your S.O."}),"\n",(0,s.jsxs)(n.p,{children:["e.g: This blog is deployed with this ",(0,s.jsx)(n.a,{href:"https://github.com/vinicinbgs/vinicinbgs.github.io/blob/main/deploy.sh",children:"Shell Script"})," that generate a build, commit, push to gh-pages branch in my repo."]}),"\n",(0,s.jsx)(n.p,{children:"You can use CLI commands from others softwares installed in your machine, like GIT, Docker, node, npm..."}),"\n",(0,s.jsx)(n.p,{children:"If you understand the power of shell script your imagination will be the limit."}),"\n",(0,s.jsx)(n.p,{children:"Without further ado..."}),"\n",(0,s.jsxs)(n.h2,{id:"-1-introduction",children:[(0,s.jsx)("a",{name:"intro"})," 1. Introduction"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"What is Shell Script?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A shell script is a text file that contains a sequence of commands for a UNIX-based\noperating system. It is called a shell script because it combines a sequence of commands,\nthat would otherwise have to be typed into the keyboard one at a time, into a single script."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"A Unix shell is both a command interface and a programming language"}),"\n",(0,s.jsx)("p",{class:"hightlight bg-danger",children:(0,s.jsxs)(n.p,{children:["In our case the computer program is ",(0,s.jsx)("ins",{children:"example.sh"})," file"]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("h4",{children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("a",{name:"create-example"}),"  1.1 Create a file called ",(0,s.jsx)("ins",{children:"example.sh"})," using terminal, follow:"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"touch example.sh\nchmod +x example.sh\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"touch"}),": will create the file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"chmod +x"}),": will give permission to execute file script"]}),"\n"]}),"\n",(0,s.jsx)("p",{class:"hightlight",children:(0,s.jsxs)(n.p,{children:["You can use ",(0,s.jsx)("strong",{children:"touch"})," and ",(0,s.jsx)("strong",{children:"chmod"})," commands inside your shell script file too"]})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("h4",{children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("a",{name:"write-example"})," 1.2 Open file ",(0,s.jsx)("ins",{children:"example.sh"})," in your preferred IDE"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\n\necho "Start" # this command will output in terminal Start string\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"#!/bin/sh"})," tells Unix that the file is to be executed by /bin/sh."]}),"\n"]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("h4",{children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("a",{name:"run-example"})," 1.3 Running file ",(0,s.jsx)("ins",{children:"example.sh"})," in terminal"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sh example.sh\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("h4",{children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("a",{name:"create-new-file-example"})," 1.4 Create a new file using shell script"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\necho "Start"\ntouch new_file.txt # create new file called new_file.txt\necho "First Line">> new_file.txt # append in new_file.txt the text First Line\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.h2,{id:"-2-variables",children:[(0,s.jsx)("a",{name:"variables"})," 2. Variables"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"A variable is a character string to which we assign a value.\nThe value assigned could be a number, text, filename, device, or any other type of data."}),"\n",(0,s.jsxs)(n.h3,{id:"21--declare-variable",children:["2.1 ",(0,s.jsx)("a",{name:"variables-declare"})," Declare Variable"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\n\nVARIABLE_MY_NAME="Vinicius"\nVARIABLE_TEXT="Hi, my name is "\necho "$VARIABLE_TEXT $VARIABLE_MY_NAME"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Terminal Output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"Hi, my name is Vinicius\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"22--read-input-variable",children:["2.2 ",(0,s.jsx)("a",{name:"variables-user-input"})," Read Input Variable"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\n\necho "What is your name?"\nread VARIABLE_MY_NAME\n\nVARIABLE_TEXT="Hi,"\n\necho "$VARIABLE_TEXT $VARIABLE_MY_NAME"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Terminal Output:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"What is your name?\n> Vinicius\n\nHi, Vinicius\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.h2,{id:"-3-loops",children:[(0,s.jsx)("a",{name:"loops"})," 3. Loops"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"Loops will enable you to execute one or more commands repeatedly"}),"\n",(0,s.jsxs)(n.h3,{id:"-31-for",children:[(0,s.jsx)("a",{name:"loops-for"})," 3.1 For"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nfor i in 1 2 3 4 5\ndo\n  echo "Looping ... number $i"\ndone\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"-32-while",children:[(0,s.jsx)("a",{name:"loops-while"})," 3.2 While"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/sh\nwhile :\ndo\n  echo "Please type something in (^C to quit)"\n  read INPUT_STRING\n  echo "You typed: $INPUT_STRING"\ndone\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.h3,{id:"-4-comparison",children:[(0,s.jsx)("a",{name:"comparison"})," 4. Comparison"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Sometimes you need to check if one variable is equal or not to another or greater/less... ",(0,s.jsx)("br",{}),"\nIn this section you can check ways to compare numbers and strings variables."]}),"\n",(0,s.jsxs)(n.h4,{id:"-41-numbers-comparison",children:[(0,s.jsx)("a",{name:"numbers-comparison"})," 4.1 Numbers Comparison"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# is equal to:\nif [ "$a" -eq "$b" ]\n\n# is not equal to:\nif [ "$a" -ne "$b" ]\n\n# is greater than:\nif [ "$a" -gt "$b" ]\n\n# is greater than or equal to:\nif [ "$a" -ge "$b" ]\n\n# is less than: -lt\nif [ "$a" -lt "$b" ]\n\n# is less than or equal to:\nif [ "$a" -le "$b" ]\n\n# is less than (within double parentheses):\n(("$a" < "$b"))\n\n# is less than or equal to (within double parentheses):\n(("$a" <= "$b"))\n\n# is greater than (within double parentheses):\n(("$a" > "$b"))\n\n# is greater than or equal to (within double parentheses):\n(("$a" >= "$b"))\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.h4,{id:"-42-string-comparison",children:[(0,s.jsx)("a",{name:"string-comparison"})," 4.2 String Comparison"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# is equal to: \nif [ "$a" = "$b" ]\n\n# is equal to:\nif [ "$a" == "$b" ]\n\n# is not equal to:\nif [ "$a" != "$b" ]\n\n# is less than, in ASCII alphabetical order:\nif [[ "$a" < "$b" ]]\n\n# is greater than, in ASCII alphabetical order:\nif [[ "$a" > "$b" ]]\n\n# string is null, that is, has zero length:\nif [ -z "$String" ]\nthen\n  echo "\\$String is null."\nelse\n  echo "\\$String is NOT null."\nfi\n\n# string is not null:\nif [ -n "$String" ]\nthen\n  echo "\\$String is not null."\nelse\n  echo "\\$String is null."\nfi\n'})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.h3,{id:"-5-final-examplesh",children:[(0,s.jsx)("a",{name:"final-example"})," 5. Final example.sh"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"Copy the script below and run it on your machine and after use, edit to your needs"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/vinicinbgs/article-example-understand-shell-script/blob/main/example.sh",children:"Repository on GitHub"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!bin/sh\n\nscript() {\n    echo "Start" # Output Start in terminal\n\n    # Receive variable by user input\n    echo "Put your name"      # Output Put your name in terminal\n    read name                 # Wait/Receive input variable name by user\n    echo Your name is ${name} # Output Your name is variable name\n\n    # Execute commands of another programs (like docker, git...)\n    docker -v # docker version\n    git --version # git version\n\n\n    rm Dockerfile # Remove old Dockerfile\n    touch Dockerfile # Create Dockerfile\n    echo "FROM alpine:3.14" >>Dockerfile # Input echo string inside file\n    echo \'ENTRYPOINT ["echo", "Container running \ud83d\udc4d ( \u0361\xb0 \u035c\u0296 \u0361\xb0)"]\' >>Dockerfile # Input echo string inside file\n    echo \'CMD ["\'${name}\'"] && /dev/null\' >>Dockerfile # Input echo string inside file\n\n    # Build and Execute Docker Container\n    imageName="${name}-docker-image" # docker image name variable\n    docker build -t ${imageName} .   # build image\n    docker images                    # list images\n\n    # Generate utils variables\n    timestamp=$(date +%s)                                 # create variable timestamp to attach in container name\n    containerName="${name}-docker-container-${timestamp}" # variable container name to assign in run command\n\n    # Running command and see logs\n    echo "-------"\n    echo "Start: " && docker run -d --name ${containerName} ${imageName} # running container\n    echo "-------"\n    echo "Logs: " && docker logs ${containerName} # output logs container\n    echo "-------"\n    # Remove all Containers\n    containers=$(docker ps -a --format "{{.Names}}" | grep "${name}-docker-container") # list all containers created in this script\n    docker rm -f ${containers}                                                         # remove all containers created in this script\n    docker ps -a                                                                       # list all containers\n\n    # Remove all Images\n    imgs=$(docker images --format "{{.Repository}}" | grep "${imageName}") # imgs created repository\n    docker rmi -f ${imgs} # Remove images in imgs variable\n}\n\nscript | tee ex.log # fill log file called ex.log\n'})}),"\n",(0,s.jsx)(n.p,{children:"Steps:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'output "start" in terminal'}),"\n",(0,s.jsx)(n.li,{children:'output "Put your name" in terminal'}),"\n",(0,s.jsx)(n.li,{children:"wait user input variable name"}),"\n",(0,s.jsx)(n.li,{children:'output "Your name is ..." in terminal'}),"\n",(0,s.jsx)(n.li,{children:"check docker version"}),"\n",(0,s.jsx)(n.li,{children:"check git version"}),"\n",(0,s.jsx)(n.li,{children:"remove old Dockerfile"}),"\n",(0,s.jsx)(n.li,{children:"create new Dockerfile empty"}),"\n",(0,s.jsx)(n.li,{children:"write in file Dockerfile echo string to create a valid docker image"}),"\n",(0,s.jsx)(n.li,{children:"build image"}),"\n",(0,s.jsx)(n.li,{children:"run container"}),"\n",(0,s.jsx)(n.li,{children:"output logs container"}),"\n",(0,s.jsx)(n.li,{children:"remove all containers created (normally only one)"}),"\n",(0,s.jsx)(n.li,{children:"remove all images created (normally only one)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)("p",{class:"hightlight",style:{backgroundColor:"yellow",color:"black"},children:(0,s.jsx)(n.p,{children:"Use SOURCES to study and deepen your knowledge"})}),"\n",(0,s.jsx)("a",{name:"sources"}),"\n",(0,s.jsxs)(n.p,{children:["Sources: ",(0,s.jsx)("br",{})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.gnu.org/software/bash/manual/html_node/index.html",children:"https://www.gnu.org/software/bash/manual/html_node/index.html"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.shellscript.sh",children:"https://www.shellscript.sh"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://tldp.org/LDP/abs/html/comparison-ops.html",children:"https://tldp.org/LDP/abs/html/comparison-ops.html"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.tutorialspoint.com/unix/",children:"https://www.tutorialspoint.com/unix/"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.oreilly.com/openbook/debian/book/ch13_03.html",children:"https://www.oreilly.com/openbook/debian/book/ch13_03.html"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Tee_(command)",children:"https://en.wikipedia.org/wiki/Tee_(command)"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.techtarget.com/searchdatacenter/definition/shell-script",children:"https://www.techtarget.com/searchdatacenter/definition/shell-script"})," (shell)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/",children:"https://docs.docker.com/develop/develop-images/dockerfile_best-practices/"})," (docker)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/vinicinbgs/blog-projects/tree/main/shell-script",children:"https://github.com/vinicinbgs/blog-projects/tree/main/shell-script"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(6540);const l={},a=s.createContext(l);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);